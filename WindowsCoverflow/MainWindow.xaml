<Window x:Class="WindowsCoverflow.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Windows Coverflow" 
        Style="{StaticResource CoverflowWindowStyle}"
        KeyDown="Window_KeyDown"
        MouseWheel="Window_MouseWheel">
    
    <Grid x:Name="MainGrid" Background="#80000000">
        <!-- Dimming overlay kept light so blur is visible -->
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 3D Viewport for Coverflow effect -->
        <Viewport3D x:Name="Viewport" Grid.Row="0" ClipToBounds="False">
            <Viewport3D.Camera>
                <PerspectiveCamera x:Name="Camera" 
                                 Position="0,0,1000" 
                                 LookDirection="0,0,-1" 
                                 UpDirection="0,1,0" 
                                 FieldOfView="50"/>
            </Viewport3D.Camera>

            <!-- Lighting (kept in viewport; cards are added in code) -->
            <ModelVisual3D x:Name="LightsVisual">
                <ModelVisual3D.Content>
                    <Model3DGroup>
                        <AmbientLight Color="#666666"/>
                        <DirectionalLight Color="#888888" Direction="-1,-1,-3"/>
                    </Model3DGroup>
                </ModelVisual3D.Content>
            </ModelVisual3D>
            
            <!-- Dynamic window cards will be added here via code -->
        </Viewport3D>

        <!-- Bottom info bar (disabled: per-card icon+title is rendered on each card) -->
        <Border Grid.Row="1" 
                Background="#DD000000" 
                Padding="20"
                Height="100"
                Visibility="Collapsed">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Window icon -->
                <Image x:Name="CurrentIcon" 
                       Grid.Column="0"
                       Width="48" 
                       Height="48" 
                       Margin="0,0,20,0"
                       VerticalAlignment="Center"/>

                <!-- Window title -->
                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                    <TextBlock x:Name="CurrentTitle" 
                               FontSize="24" 
                               FontWeight="SemiBold"
                               Foreground="White" 
                               TextTrimming="CharacterEllipsis"/>
                    <TextBlock x:Name="CurrentSubtitle" 
                               FontSize="14" 
                               Foreground="#BBBBBB" 
                               TextTrimming="CharacterEllipsis"
                               Margin="0,5,0,0"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Help text overlay -->
        <Border x:Name="HelpOverlay" 
                Grid.RowSpan="2"
                Background="#99000000"
                Visibility="Collapsed"
                Padding="40">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <TextBlock FontSize="18" Foreground="White" TextAlignment="Center" Margin="0,5">
                    <Run FontWeight="Bold">Arrow Keys / Mouse Wheel:</Run> Navigate windows
                </TextBlock>
                <TextBlock FontSize="18" Foreground="White" TextAlignment="Center" Margin="0,5">
                    <Run FontWeight="Bold">Enter:</Run> Select window
                </TextBlock>
                <TextBlock FontSize="18" Foreground="White" TextAlignment="Center" Margin="0,5">
                    <Run FontWeight="Bold">Esc:</Run> Cancel
                </TextBlock>
                <TextBlock FontSize="18" Foreground="White" TextAlignment="Center" Margin="0,5">
                    <Run FontWeight="Bold">Q:</Run> Close current window
                </TextBlock>
                <TextBlock FontSize="18" Foreground="White" TextAlignment="Center" Margin="0,5">
                    <Run FontWeight="Bold">D:</Run> Show desktop
                </TextBlock>
                <TextBlock FontSize="18" Foreground="White" TextAlignment="Center" Margin="0,10">
                    <Run FontWeight="Bold">F1:</Run> Toggle this help
                </TextBlock>
            </StackPanel>
        </Border>
    </Grid>
</Window>
